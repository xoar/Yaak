<HTML>
<HEAD>
<!-- This HTML file has been created by texi2html 1.29
     from lidoref.tnf on 5 December 2013 -->

<TITLE>LIDO - Reference Manual - Computations</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000" BACKGROUND="gifs/bg.gif">
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0" VALIGN=BOTTOM>
<TR VALIGN=BOTTOM>
<TD WIDTH="160" VALIGN=BOTTOM>
<A HREF="http://eli-project.sourceforge.net/">
<IMG SRC="gifs/elilogo.gif" BORDER=0>
</A>&nbsp;
</TD>
<TD WIDTH="25" VALIGN=BOTTOM>
<img src="gifs/empty.gif" WIDTH=25 HEIGHT=25>
</TD>
<TD ALIGN=LEFT WIDTH="475" VALIGN=BOTTOM>
<A HREF="index.html"><IMG SRC="gifs/title.png" BORDER=0></A>
</TD>
<!-- |DELETE FOR SOURCEFORGE LOGO|
<TD>
<a href="http://sourceforge.net/projects/eli-project">
<img
  src="http://sflogo.sourceforge.net/sflogo.php?group_id=70447&amp;type=13"
  width="120" height="30"
  alt="Get Eli: Translator Construction Made Easy at SourceForge.net.
    Fast, secure and Free Open Source software downloads"/>
</a>
</TD>
|DELETE FOR SOURCEFORGE LOGO| -->
</TR>
</TABLE>

<HR size=1 noshade width=785 align=left>
<TABLE BORDER=0 CELLSPACING=2 CELLPADDING=0>
<TR>
<TD VALIGN=TOP WIDTH="160">
<h4>General Information</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="index.html">Eli: Translator Construction Made Easy</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="gindex_1.html#SEC1">Global Index</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="faq_toc.html" >Frequently Asked Questions</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="ee.html" >Typical Eli Usage Errors</a> </td></tr>
</table>

<h4>Tutorials</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="EliRefCard_toc.html">Quick Reference Card</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="novice_toc.html">Guide For new Eli Users</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="news_toc.html">Release Notes of Eli</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="nametutorial_toc.html">Tutorial on Name Analysis</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="typetutorial_toc.html">Tutorial on Type Analysis</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="ee.html" >Typical Eli Usage Errors</a> </td></tr>
</table>

<h4>Reference Manuals</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="ui_toc.html">User Interface</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="pp_toc.html">Eli products and parameters</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="lidoref_toc.html">LIDO Reference Manual</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="ee.html" >Typical Eli Usage Errors</a> </td></tr>
</table>

<h4>Libraries</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="lib_toc.html">Eli library routines</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="modlib_toc.html">Specification Module Library</a></td></tr>
</table>

<h4>Translation Tasks</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="lex_toc.html">Lexical analysis specification</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="syntax_toc.html">Syntactic Analysis Manual</a></td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="comptrees_toc.html">Computation in Trees</a></td></tr>
</table>

<h4>Tools</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="lcl_toc.html">LIGA Control Language</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="show_toc.html">Debugging Information for LIDO</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="gorto_toc.html">Graphical ORder TOol</a> </td></tr>
</table>
<p>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="fw_toc.html">FunnelWeb User's Manual</a> </td></tr>
</table>
<p>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="ptg_toc.html">Pattern-based Text Generator</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="deftbl_toc.html">Property Definition Language</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="oil_toc.html">Operator Identification Language</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="tp_toc.html">Tree Grammar Specification Language</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="clp_toc.html">Command Line Processing</a> </td></tr>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="cola_toc.html">COLA Options Reference Manual</a> </td></tr>
</table>
<p>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="idem_toc.html">Generating Unparsing Code</a> </td></tr>
</table>
<p>
<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="mon_toc.html">Monitoring a Processor's Execution</a> </td></tr>
</table>

<h4>Administration</h4>

<table BORDER=0 CELLSPACING=0 CELLPADDING=0>
<tr valign=top><td><img src="gifs/gelbekugel.gif" WIDTH=7 HEIGHT=7 ALT=" o"> </td><td><a href="sysadmin_toc.html">System Administration Guide</a> </td></tr>
</table>

<HR WIDTH="100%">
<A HREF="mailto:eli-project-users@lists.sourceforge.net">
<IMG SRC="gifs/button_mail.gif" BORDER=0 ALIGN="left"></A>
<A HREF="index.html"><IMG SRC="gifs/home.gif" BORDER=0 ALIGN="right"></A>

</TD>
<TD VALIGN=TOP WIDTH="25"><img src="gifs/empty.gif" WIDTH=25 HEIGHT=25></TD>

<TD VALIGN=TOP WIDTH="600">
<H1>LIDO - Reference Manual</H1>
<P>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_4.html"><IMG SRC="gifs/prev.gif" ALT="Previous Chapter" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_6.html"><IMG SRC="gifs/next.gif" ALT="Next Chapter" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_toc.html"><IMG SRC="gifs/up.gif" ALT="Table of Contents" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT="">
<HR size=1 noshade width=600 align=left>
<H1><A NAME="SEC6" HREF="lidoref_toc.html#SEC6">Computations</A></H1>
<A NAME="IDX53"></A>
<P>
Computations are associated with rules or with symbols. Each computation
(that is not overridden) is executed exactly once for every instance
of its context in a particular tree. A computation may yield a value
denoted as an attribute which may be used by other computations.
Computations may also be specified as depending on one another without
passing a value in order to specify dependences on side-effects of
computations.
(see  <A HREF="lidoref_7.html#SEC12">Dependent Expressions</A>).
<A NAME="IDX54"></A>
<P>
<H4>Syntax</H4>
<PRE>
    Computations ::=  [ 'COMPUTE' Computation ]

    Computation  ::=  Computation Computation |
                   | Attribute '=' Expression Terminator
                   | Expression Terminator
                   | Attribute '+=' Expression Terminator

    Terminator   ::= ';'
                   | 'BOTTOMUP' ';'
</PRE>
<A NAME="IDX55"></A>
<A NAME="IDX56"></A>
<A NAME="IDX57"></A>
<A NAME="IDX58"></A>
<P>
There are three forms of computations: <DFN>attribute computations</DFN> denoted
as an assignment to an attribute,  <DFN>plain computations</DFN>
that are simple expressions, and <DFN>accumulating computations</DFN> which
are a special variant of attribute computations, distinguished by the <CODE>+=</CODE>
token.
<P>
<A NAME="IDX59"></A>
<A NAME="IDX60"></A>
<A NAME="IDX61"></A>
<P>
<H2><A NAME="SEC7" HREF="lidoref_toc.html#SEC7">Attribute Computations and Plain Computations</A></H2>
<P>
The following example shows a sequence of two attribute computations
and two plain computations:
<H4>Examples</H4>
<PRE>
    COMPUTE
      Expr.postType = boolType;
      Stmt[1].code = PTGWhile (Expr.code, Stmt[2].code);
      printf ("while loop in line %d\n", LINE);
      printf ("value = %d\n", Expr.val) BOTTOMUP;
    END;
</PRE>
<A NAME="IDX62"></A>
<A NAME="IDX63"></A>
<P>
 A computation is executed by evaluating its expression. It depends
on every attribute that occurs in the expression regardless whether the
attribute is used for the evaluation. We say those attributes are
the <DFN>preconditions</DFN> of the computation.
The attribute on the left-hand side of an attribute computation
represents the <DFN>postcondition</DFN> of that computation.
Plain computations do not establish a postcondition for
any other computation. 
The evaluator is generated such that the
computations are executed in an order that obeys these dependencies
for any tree of the tree grammar.
<A NAME="IDX65"></A>
<A NAME="IDX66"></A>
<A NAME="IDX64"></A>
<P>
If both a symbol computation and a rule computation define the same attribute
of a symbol, the rule computation will be executed in that context,
overriding the symbol computation.
<P>
An expression may occur in <DFN>value context</DFN>, where it must yield
a value, or it may occur in <DFN><CODE>VOID</CODE> context</DFN>, where 
it may or may not yield a value. 
If it does yield a value in <CODE>VOID</CODE> context, the value is discarded.
These terms will be used in sections below where further constructs
are introduced which contain expressions.
<P>
If the left-hand side attribute of an attribute computation
has a type different from <CODE>VOID</CODE> the right-hand side expression
is in value context; the result of 
the expression evaluation is assigned to the attribute.
If the left-hand side attribute has the type <CODE>VOID</CODE> the 
right-hand side expression is in <CODE>VOID</CODE> context.
In this case the
attribute simply states the postcondition that the computation has been
executed.
<A NAME="IDX68"></A>
<A NAME="IDX69"></A>
<A NAME="IDX70"></A>
<A NAME="IDX71"></A>
<A NAME="IDX72"></A>
<A NAME="IDX67"></A>
<P>
A plain computation is in <CODE>VOID</CODE> context, i. e. it may or may not
yield a value.
<P>
Computations may be specified to be executed <CODE>BOTTOMUP</CODE>, that means
while the input is being
read and the tree is being built.
LIGA then tries to arrange the computations
such that those are executed already when their tree node is constructed.
This facility is useful for example if the generated language processor
is to produce output while its input is supplied (like desktop calculators),
or if a computation is used to switch the input file.
<P>
Note: A <CODE>BOTTOMUP</CODE> computation may depend on other computations.
These dependencies should be specified the usual way. Such
precondition computations should NOT be specified <CODE>BOTTOMUP</CODE>
unless they themselves are to be related to input processing.
Without such an over-specification LIGA can apply more sophisticated
means to correctly schedule the precondition computations
automatically.
<P>
Note: Due to the parser's lookahead, one token beyond the last token
of the context of the <CODE>BOTTOMUP</CODE> computation is read before
before the computation is executed.
<A NAME="IDX73"></A>
<P>
<H4>Restrictions</H4>
<P>
If the attribute in an attribute computation has a non-<CODE>VOID</CODE> type
the evaluation of the expression must yield a value of that type. This
condition is not checked by LIGA. It is checked by the compiler
that compiles the generated evaluator.
<P>
Multiple symbol computations that define the same
attribute are forbidden.
<P>
There must be exactly one attribute computation for each synthesized
attribute of the left-hand side nonterminal and for each inherited
attribute of each nonterminal occurrence on the right-hand side 
in the production of a rule context, or such a computation is inherited
in the rule context.
(For accumulating computations a different rule applies.)
<P>
There may not be any cyclic dependencies between computations for
any tree of the tree grammar.
<A NAME="IDX74"></A>
<P>
Contexts that may belong to subtrees which are built by 
computations (see  <A HREF="lidoref_10.html#SEC20">Computed Subtrees</A>) may not have
computations that are marked <CODE>BOTTOMUP</CODE> or contribute to
<CODE>BOTTOMUP</CODE> computations.
<P>
LIGA may fail to allocate <CODE>BOTTOMUP</CODE> computations as required
due to attribute dependencies or due to LIGA's evaluation strategy.
In such cases messages are given.
<P>
<H2><A NAME="SEC8" HREF="lidoref_toc.html#SEC8">Accumulating Computations</A></H2>
<A NAME="IDX75"></A>
<P>
There are situations where a <CODE>VOID</CODE> attribute, say
<CODE>Program.AnalysisDone</CODE>, represents a computational state which
is reached when several computations are executed, which conceptually belong to
different sections of the LIDO text. Instead of moving all these
computations to the only place where <CODE>Program.AnalysisDone</CODE> is computed,
several accumulating computations may stay in their conceptual context
and contribute dependences to that attribute.
<P>
A computation is marked to be accumulating by the <CODE>+=</CODE> token. 
The following example demonstrates the above mentioned use
of accumulating computations:
<PRE>
RULE: Program ::= Statements COMPUTE
   Program.AnalysisDone += DoThis ( );
END;
  ....
RULE: Program ::= Statements COMPUTE
   Program.AnalysisDone += DoThat ( ) &#60;- Statements.checked;
END;
</PRE>
Two accumulating computations contribute both to the attribute
<CODE>Program.AnalysisDone</CODE>, such that it represents the state when
the calls <CODE>DoThis ( )</CODE> and <CODE>DoThat ( )</CODE> are executed after the
pre-condition <CODE>Statements.checked</CODE> has been reached.
The two accumulating computations above have the same effect as if there
was a single computation, as in
<PRE>
RULE: Program ::= Statements COMPUTE
   Program.AnalysisDone = ORDER (DoThis ( ), DoThat ( )) 
                          &#60;- Statements.checked;
END;
</PRE>
The order in which <CODE>DoThis ( )</CODE> and <CODE>DoThat ( )</CODE> are executed
is arbitrarily decided by the Liga system.
<P>
Accumulating computations may be formulated in rule context
or in the context of <CODE>TREE</CODE> or <CODE>CLASS</CODE> symbols. Rule attributes may
also be computed by accumulating computations.
<A NAME="IDX76"></A>
<P>
Only <CODE>VOID</CODE> attributes may have accumulating computations.
If an attribute has an accumulating computation, it is called an
accumulating attribute, and all its computations must be accumulating.
Attributes are not explicitly defined to be accumulating.
If an attribute is not defined explicitly, it has the type <CODE>VOID</CODE> by default.
Hence, accumulating attributes need not be defined explicitly, at all.
<P>
The set of accumulating computations of an attribute is combined
into a single computation, containing all dependences and
function calls of the contributing accumulating computations, as 
shown above.
<P>
Accumulating computations may be inherited from <CODE>CLASS</CODE> symbols.
In contrast to non-accumulating computations, there is no
hiding for accumulating computations: All accumulating computations 
that lie on an inheritance path to an accumulating attribute
in a rule context are combined. For example, add the following
specifications to the above example:
<P>
<PRE>
SYMBOL Program INHERITS AddOn COMPUTE
  SYNT. AnalysisDone += AllWaysDo ( );
END;
CLASS SYMBOL AddOn COMPUTE
  SYNT. AnalysisDone += AndAlsoDo ();
END;
</PRE>
Then all four computations for <CODE>Program.AnalysisDone</CODE> 
(two in the RULE context above, one in the TREE symbol context <CODE>Program</CODE>, and one
inherited from the <CODE>CLASS</CODE> symbol <CODE>AddOn</CODE>)
will be combined into one. It characterizes the state after execution of the 
four function calls and the computation of <CODE>Statements.checked</CODE>.
<P>
<H4>Restrictions</H4>
<P>
If an attribute has an accumulating computation, it is called an accumulating
attribute, and may not have or inherit non-accumulating computations.
<P>
An accumulating attribute must have type <CODE>VOID</CODE>.
<P>
Let <CODE>X</CODE> be the left-hand side nonterminal in a rule <CODE>r</CODE> and <CODE>X.s</CODE> an
accumulating synthesized attribute, then there must be at least one
accumulating computation for <CODE>X.s</CODE> in <CODE>r</CODE> or inherited there.
<P>
Let <CODE>X[i]</CODE> be an occurrence of the nonterminal <CODE>X</CODE> on the right-hand side of
the rule <CODE>r</CODE> and <CODE>X.s</CODE> an accumulating inherited attribute, then there must
be at least one accumulating computation for <CODE>X[i].s</CODE> in <CODE>r</CODE>
or inherited there.
<P>
<CODE>CHAIN</CODE> computations and <CODE>CHAIN</CODE> attributes may not be 
accumulating.
<P>
<HR size=1 noshade width=600 align=left>
<P>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_4.html"><IMG SRC="gifs/prev.gif" ALT="Previous Chapter" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_6.html"><IMG SRC="gifs/next.gif" ALT="Next Chapter" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT=""><A HREF="lidoref_toc.html"><IMG SRC="gifs/up.gif" ALT="Table of Contents" BORDER="0"></A>
<IMG SRC="gifs/empty.gif" WIDTH=25 HEIGHT=25 ALT="">
<HR size=1 noshade width=600 align=left>
</TD>
</TR>
</TABLE>

</BODY></HTML>
